<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/sha3.min.js"></script>
</head>
<body>
<table>
    <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Postcode</th>
    </tr>
    <tr>
        <td hidden>nothing</td>
        <td>ccq</td>
        <td>112312312</td>
        <td>334234523</td>
    </tr>
</table>
<script>
    // function highlightCode(node, keywords) {
    //     let text=node.textContent;
    //     node.textContent="";
    //     let match ,pos=0;
    //     while(match=keywords.exec(text)){
    //         let before=text.slice(pos,match.index);
    //         node.appendChild(document.createTextNode(before));
    //         let strong = document.createElement("strong");
    //         strong.appendChild(document.createTextNode(match[0]));
    //         node.appendChild(strong);
    //         pos=keywords.lastIndex;
    //     }
    //     let after=text.slice(pos);
    //     node.appendChild(document.createTextNode(after));
    // }

    // let languages={ javascript: /\b(function |return|var)\b/g /* ... etc */ };

    // function highlightAllCode(){
    //     let pres=document.body.getElementsByTagName("pre");
    //     for(let i=0;i<pres.length;i++){
    //         let pre=pres[i];
    //         let lang=pre.getAttribute("data-language");
    //         if(languages.hasOwnProperty(lang))
    //             highlightCode(pre,languages[lang]);
    //     }
    // }
    // highlightAllCode();
    
    // function buildTable(data) {
    //     let table=document.createElement("table");
    //     for(let i=0;i<data.length;i++){
    //         let tr=document.createElement("tr");
    //         tr.appendChild(document.createElement("td")).textContent=data[i].name;
    //         tr.appendChild(document.createElement("td")).textContent=data[i].height;
    //         tr.appendChild(document.createElement("td")).textContent=data[i].country;
    //         table.appendChild(tr);
    //     }
    //     return table;
    // }

</script>
<script>
    let page=1;
    let requests = location.search;
    if (requests.indexOf("?") !== -1) {
        let str = requests.substr(1).split("&");
        page = parseInt(str[0].split("=")[1]);
    }
    console.log(page);
    function upload(event) {
        let file = event.target.files[0];
        let tar=event.target;
        console.dir(tar);
        console.log(tar.id);
        let type = [".jpg", ".jpeg", ".png", ".bmp", ".gif"];
        let imgType = file.name.toLowerCase();
        let star=imgType.lastIndexOf('.');
        imgType=imgType.slice(star);
        let flag = false;
        for (let i = 0; i < type.length; i++) {
            flag = (imgType===type[i]);
            if (flag)
                break;
        }
        if (flag) {
            let reader = new FileReader();
            reader.onload = function (event) {
                console.log("Read the img is OK!");
                let img = document.getElementById("preview");
                img.src = this.result;
                img.hidden = false;
                let str=this.result.toString();
                let start=str.indexOf('base64,');
                str=str.slice(start+7);
                let arr=base64js.toByteArray(str);
                let name=SparkMD5.ArrayBuffer.hash(arr);
                name=name+imgType;
                document.getElementById('imgname').value=name;
                console.log(name);
                append(name);
                document.getElementById("submit").hidden=false;
            };
            reader.readAsDataURL(file);
        } else {
            alert("请上传图片文件");
            location.reload();
        }
    }
</script>
</body>
</html>
<body>